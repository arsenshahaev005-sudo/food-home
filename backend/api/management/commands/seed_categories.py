from django.core.management.base import BaseCommand

from api.models import Category


class Command(BaseCommand):
    help = 'Seed initial categories and subcategories'

    def handle(self, *args, **options):
        # 1. Clear existing categories
        self.stdout.write('Clearing existing categories...')
        Category.objects.all().delete()

        # 2. Define categories and subcategories
        data = {
            'Выпечка': [
                'Хлеб и багеты', 'Булочки и круассаны', 'Пироги и киши', 'Торты на заказ', 
                'Десерты и пирожные', 'Печенье и пряники', 'Кексы и маффины', 'Блины и оладьи',
                'Сырники', 'Пахлава и восточные сладости'
            ],
            'Горячие блюда': [
                'Супы и бульоны', 'Мясные блюда', 'Рыбные блюда', 'Птица', 
                'Плов и блюда из риса', 'Паста и лапша', 'Котлеты и тефтели', 
                'Запеканки', 'Вегетарианские горячие блюда'
            ],
            'Завтраки': [
                'Каши и боулы', 'Яичница и омлеты', 'Сэндвичи и тосты', 
                'Гранола и мюсли', 'Творожные завтраки'
            ],
            'Закуски и салаты': [
                'Овощные салаты', 'Мясные салаты', 'Холодные закуски', 
                'Горячие закуски', 'Паштеты и риеты', 'Бутерброды и тапас',
                'Соусы и дипы'
            ],
            'Напитки': [
                'Соки и морсы', 'Домашние лимонады', 'Квас и комбуча', 
                'Компоты и кисели', 'Травяной чай', 'Кофе и какао'
            ],
            'Замороженные продукты': [
                'Пельмени', 'Вареники', 'Хинкали и манты', 'Чебуреки и самса',
                'Голубцы и фаршированные перцы', 'Котлеты и наггетсы (заморозка)', 
                'Блины с начинкой (заморозка)', 'Тесто домашнее'
            ],
            'Консервация и заготовки': [
                'Варенье и джемы', 'Мед и продукты пчеловодства', 'Соленья и маринады', 
                'Вяленые томаты и овощи', 'Домашние соусы и аджика', 'Масло и заправки',
                'Сухофрукты и орехи'
            ],
            'Подарочные наборы': [
                'Сладкие боксы', 'Гастрономические корзины', 'Наборы для чаепития', 
                'Тематические наборы (праздники)', 'Наборы специй'
            ],
            'Уют и дом': [
                'Пледы и декоративные подушки', 'Ночники и светильники', 
                'Свечи и ароматы для дома', 'Декор из дерева и керамики', 
                'Посуда ручной работы', 'Текстиль (скатерти, салфетки)', 
                'Вязаные изделия для дома', 'Картины и постеры',
                'Ароматические саше', 'Интерьерные куклы'
            ],
            'Красота и уход': [
                'Натуральное мыло', 'Бомбочки для ванны', 'Масла и баттеры для тела', 
                'Скрабы ручной работы', 'Твердые шампуни', 'Соль для ванны',
                'Подарочные косметические наборы'
            ],
            'Одежда и аксессуары': [
                'Вязаные шапки и шарфы', 'Сумки и шоперы ручной работы', 
                'Бижутерия и украшения', 'Кожаные аксессуары (ремни, кошельки)',
                'Одежда из льна и хлопка', 'Броши и значки'
            ],
            'Хобби и творчество': [
                'Наборы для рукоделия', 'Картины по номерам', 
                'Материалы для творчества', 'Авторские открытки',
                'Керамические заготовки для росписи'
            ],
            'Для домашних животных': [
                'Натуральные лакомства', 'Лежанки и домики', 
                'Игрушки ручной работы', 'Одежда для питомцев',
                'Аксессуары (ошейники, поводки)'
            ],
            'Детское меню': [
                'Детские супчики', 'Мини-котлетки', 'Фигурная выпечка', 
                'Полезные перекусы', 'Пюре и кашки'
            ],
            'Веган и ПП': [
                'Полезные сладости (без сахара)', 'Безглютеновая выпечка', 
                'Веганские основные блюда', 'Растительное молоко', 'Смузи-боксы'
            ]
        }

        # 3. Create categories and subcategories
        for main_cat_name, subcats in data.items():
            main_cat = Category.objects.create(name=main_cat_name)
            self.stdout.write(self.style.SUCCESS(f'Created category: {main_cat_name}'))
            
            for subcat_name in subcats:
                Category.objects.create(name=subcat_name, parent=main_cat)
                self.stdout.write(self.style.SUCCESS(f'  Created subcategory: {subcat_name}'))

        self.stdout.write(self.style.SUCCESS('Successfully seeded all categories and subcategories'))
